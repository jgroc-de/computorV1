#!/usr/bin/python3

import sys
from src.computor import compute
import argparse
from src.CmdParse import CmdParse

if __name__ == "__main__":
    usage_message = 'compute solution of equation up to degree 2 and basic calculator.'
    parser = argparse.ArgumentParser(description=usage_message)
    #parser.add_argument('-v', '--verbose', action="store_true", help='verbose mode: show graphs')
    #parser.add_argument('-f', '--file', type=str, default='data', help='file to use in dir data - ex: -f test will use data/test.csv and data/test_prophecy.csv')
    parser.add_argument('equation', type=str, help='equation or calculus to solve. ex: ./computorV1  "5 * X^0 + 4 * X^1 - 9.3 * X^2 = 1 * X^0"')
    args = parser.parse_args()
    equation = args.equation

    number_of_args = len(sys.argv)
    if not equation:
        try:
            CmdParse().cmdloop()
        except KeyboardInterrupt:
            print()
            pass
    else:
        try:
            result = compute(argv[1])
            print(result)
        except ValueError:
            pass
        except SyntaxError as error:
            print(error)

    try:
        print(compute(equation))
    except ValueError:
        pass
    except SyntaxError as error:
        print(error)
